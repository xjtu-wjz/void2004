import{d as L,a as Y,b as g,c as I,g as y,h as H,f as p,L as W,N as D,S as J,i as B,C as G,Y as Q,O as M,p as O,ae as X,aT as z,aU as K,e as T,Q as q,x as U,aV as Z,r as ee,aW as te,u as ne,a1 as re,v as oe,w as x,j as w,t as R,a8 as se,F as ae,k as ie,aM as ce,aN as le,aX as ue,aO as de,aP as fe,aQ as pe}from"./app-B5BMfZs9.js";import{i as _e,E as me}from"./index-BdXtrZO7.js";import{E as ve}from"./index-BqWPrNW4.js";function F(e){return typeof e=="string"}function ge(e){return typeof e=="number"}function V(e,t="px"){return F(e)||ge(e)?F(e)&&/\D/g.test(e)?e:e+t:""}const ye={class:"mb-15"},he=y("div",{class:"border-t border-gray-200 dark:border-gray-600"},null,-1),be={class:"flex items-center justify-end mt-2"},we=y("div",{class:"i-ri-eye-fill mr-2"},null,-1),Ee=["data-path"],Pe=L({__name:"HairyPostFooter",setup(e){const t=Y();return(n,o)=>(g(),I("div",ye,[he,y("div",be,[we,H(" 阅读次数 "),y("span",{class:"waline-pageview-count mx-2","data-path":p(t).path},null,8,Ee),H(" 次 ")])]))}});typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const xe=e=>typeof e<"u";function Le(e){return JSON.parse(JSON.stringify(e))}function Ce(e,t,n,o={}){var r,s,a;const{clone:l=!1,passive:u=!1,eventName:c,deep:i=!1,defaultValue:_,shouldEmit:h}=o,d=G(),E=n||(d==null?void 0:d.emit)||((r=d==null?void 0:d.$emit)==null?void 0:r.bind(d))||((a=(s=d==null?void 0:d.proxy)==null?void 0:s.$emit)==null?void 0:a.bind(d==null?void 0:d.proxy));let P=c;t||(t="modelValue"),P=P||`update:${t.toString()}`;const C=f=>l?typeof l=="function"?l(f):Le(f):f,v=()=>xe(e[t])?C(e[t]):_,b=f=>{h?h(f)&&E(P,f):E(P,f)};if(u){const f=v(),N=W(f);let $=!1;return D(()=>e[t],j=>{$||($=!0,N.value=C(j),J(()=>$=!1))}),D(N,j=>{!$&&(j!==e[t]||i)&&b(j)},{deep:i}),N}else return B({get(){return v()},set(f){b(f)}})}var A="unified-overlay";function $e(e="",t=document.body){const n=document.createElement("div");return e&&(n.id=e),t!==!1&&t.appendChild(n),n}var m={position:null,spaces:{}};function je(e=A,t=!0){return m.spaces[e]||(m.spaces[e]=0),t?`${e}--${++m.spaces[e]}`:e}function Re(e=A){return m.spaces[e]||0}function Se(){let e,t;const n=new Promise((o,r)=>{e=o,t=r});return n.resolve=o=>(e(o),n),n.reject=t,n}function Te(){typeof window>"u"&&typeof document>"u"||document.addEventListener("click",e=>{if(e.target instanceof Element){const{left:t,top:n,width:o,height:r}=e.target.getBoundingClientRect();t>0||n>0?m.position={x:t+o/2,y:n+r/2}:m.position=null}else m.position=null;setTimeout(()=>m.position=null,64)})}function Ie(e){function t(o,r){function s(c,i){const _=Se(),h=je(i.id,i.autoIncrement),d=Re(i.id),E=$e(h,i.root);return e(o,c,Object.assign(i,{position:m.position,id:h,deferred:_,index:d,container:E})),_}let a;function l(c,i){return a||(a=s(c,i),a.finally(()=>a=void 0)),a}function u(c,i){const _={...r,...i};return _.only?l(c,_):s(c,_)}return u}function n(o,r,s){return t(o,s)(r)}return{define:t,render:n}}Te();function Ne(){}function Ve(e){return new Promise(t=>setTimeout(t,e))}const He=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),Ue=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),ke=new RegExp("(\\d)(\\p{Ll})","gu"),Oe=new RegExp("(\\p{L})(\\d)","gu"),De=/[^\p{L}\d]+/giu,S="$1\0$2";function Fe(e,t={}){let n=e.replace(He,S).replace(Ue,S);t.separateNumbers&&(n=n.replace(ke,S).replace(Oe,S)),n=n.replace(De,"\0");let o=0,r=n.length;for(;n.charAt(o)==="\0";)o++;if(o===r)return[];for(;n.charAt(r-1)==="\0";)r--;return n.slice(o,r).split(/\0/g)}function We(e){return t=>t.toLocaleLowerCase(e)}function Be(e){return t=>t.toLocaleUpperCase(e)}function Ge(e,t){const n=We(t==null?void 0:t.locale),o=Be(t==null?void 0:t.locale);return Fe(e,t).map((r,s)=>{const a=r[0];return(s>0&&a>="0"&&a<="9"?"_"+a:o(a))+n(r.slice(1))}).join("")}var Me={appContext:null},k=Symbol("OverlayScripts");function Ae(e={}){const{duration:t=0,immediate:n=!0,model:o="visible",automatic:r=!0}=e,s=Q(k,Ye(o,e)),a=Reflect.get(s,"in_dec"),{visible:l,deferred:u,vanish:c}=s;async function i(){return l.value=!1,await Ve(t),c==null||c(),Promise.resolve()}return!a&&r&&(u==null||u.then(i).catch(i)),!a&&n&&M(()=>l.value=!0),O(k,null),s}function Ye(e,t={}){const{reject:n="reject",resolve:o="resolve"}=t.events||{},r=G();if(!r)throw new Error("Please use usePrograms in component setup");const s=Ce(r.props,e,r.emit,{passive:!0});return{reject:u=>{r==null||r.emit(n,u),s.value=!1},resolve:u=>{r==null||r.emit(o,u),s.value=!1},vanish:Ne,visible:s,in_dec:!0}}function Je(e){const{reject:t}=e.deferred||{},{vanish:n}=e,o=W(!1);function r(){n==null||n(),t==null||t()}return{resolve:e.deferred.resolve,reject:e.deferred.reject,deferred:e.deferred,visible:o,vanish:r}}function Qe(e,t){var n;const o=(t==null?void 0:t.app)||((n=Me.appContext)==null?void 0:n.app);o&&(e.config.globalProperties=o.config.globalProperties,Object.assign(e._context,o._context))}var Xe=Ie((e,t,n)=>{const{container:o,id:r,deferred:s,appContext:a}=n;function l(){c.unmount(),o.remove()}const u=L({name:Ge(r),setup:()=>{const i=Je({vanish:l,deferred:s});O(k,i)},render:()=>X(e,t)}),c=z(u);return Qe(c,a),c.mount(o),l}),ze=Xe.render;const Ke={class:"HairyImageViewer fixed inset-0 z-2000"},qe=L({__name:"HairyImageViewer",props:_e,setup(e){const t=e,{visible:n,resolve:o}=Ae({duration:1e3});return M(()=>{document.body.style.overflow="hidden"}),K(()=>{document.body.style.overflow=""}),(r,s)=>(g(),I("div",Ke,[p(n)?(g(),T(p(me),q({key:0},t,{onClose:s[0]||(s[0]=a=>p(o)())}),null,16)):U("v-if",!0)]))}}),Ze=L({__name:"HairyImageGlobal",props:{row:{default:"auto"},col:{default:"auto"},gap:{default:10},justify:{default:"space-evenly"},align:{default:"initial"}},setup(e){const t=e;Z(()=>({width:V(t.row),height:V(t.col),gap:V(t.gap),justify:t.justify,align:t.align}));function n(o){ze(qe,{urlList:[o],initialIndex:0})}return O("HairyImageGroup:preview",n),(o,r)=>ee(o.$slots,"default")}}),et={class:"flex gap-2"},tt={key:0,class:"tags flex-center gap-2 mt-2"},st=L({__name:"post",props:{header:{}},setup(e){const t=te(),n=B(()=>t.value.addons["valaxy-addon-waline"]),o=ne(),r=re();function s(a){o.push(`/tags/${a}`)}return(a,l)=>{const u=ce,c=le,i=oe("router-view"),_=Ze,h=Pe,d=ue,E=de,P=fe,C=pe;return g(),T(C,null,{default:x(()=>[w(u),w(c,{title:p(r).title},{description:x(()=>{var v;return[y("div",et,[y("span",null,"发表于 "+R(p(se)(p(r).date).format("YYYY-MM-DD")),1),y("span",null,"本文字数 "+R(p(r).wordCount)+" 字",1),y("span",null,"阅读时长 "+R(p(r).readingTime)+" 分钟",1)]),(v=p(r).tags)!=null&&v.length?(g(),I("div",tt,[(g(!0),I(ae,null,ie(p(r).tags,b=>(g(),T(p(ve),{key:b,class:"dark:bg-dark-50 cursor-pointer",onClick:f=>s(b)},{default:x(()=>[H(R(b?a.$t(b,{},{missingWarn:!1}):""),1)]),_:2},1032,["onClick"]))),128))])):U("v-if",!0)]}),_:1},8,["title"]),w(E,null,{default:x(()=>{var v;return[w(_,null,{default:x(()=>[w(i)]),_:1}),(v=n.value.options)!=null&&v.pageview?(g(),T(h,{key:0})):U("v-if",!0)]}),slide:x(()=>[w(d)]),_:1}),w(P)]),_:1})}}});export{st as default};
